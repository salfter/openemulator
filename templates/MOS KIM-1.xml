<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE dml PUBLIC "-//OPENEMULATOR//DTD DML 1.0//EN" "http://www.openemulator.org/DTDs/dml-1.0.dtd">
<dml version="1.0" label="MOS KIM-1" image="MOS KIM-1.png" description="" group="Early microcomputers">
<device name="host">
    <component name="host" class="Host">
        <property name="notes" value="" />
        <property name="powerState" value="0" />
        <property name="videoWindow" value="-1 -1 768 576" />
        <property name="hidMouseCapture" value="0" />
    </component>
</device>

<device name="dev0" label="KIM-1">
    <inlet ref="kim1IO.serialPort" type="SerialPort" label="Serial Port" image="Serial Port.png" />
    <component name="bus" class="Bus">
        <property name="crystal" value="1.0MHz" />
        <property name="divider" value="1" />
        <property name="floatingBus" value="0xff" />
        <property name="resetOnPowerOn" value="0" />
        <connection name="host" ref="host:host" />
        <connection name="cpu" ref="cpu" />
    </component>
    <component name="cpu" class="MOS6502">
        <property name="a" value="0" />
        <property name="x" value="0" />
        <property name="y" value="0" />
        <property name="s" value="0" />
        <property name="p" value="0" />
        <property name="pc" value="0" />
        <connection name="memory" ref="mmu" />
        <connection name="bus" ref="bus" />
    </component>
    <component name="mmu" class="AddressDecoder">
        <property name="addressSize" value="13" />
        <property name="blockSize" value="6" />
        <connection name="bus" value="bus" />
        <connection name="component1" ref="ram" />
        <property name="map1" value="0x0000-0x03ff" />
        <connection name="component2" ref="rriot1" />
        <property name="map2" value="0x1700-0x173f" />
        <connection name="component3" ref="rriot2" />
        <property name="map3" value="0x1740-0x177f" />
        <connection name="component4" ref="rriot1RAM" />
        <property name="map4" value="0x1780-0x17bf" />
        <connection name="component5" ref="rriot2RAM" />
        <property name="map5" value="0x17c0-0x17ff" />
        <connection name="component6" ref="rriot1ROM" />
        <property name="map6" value="0x1800-0x1bff" />
        <connection name="component7" ref="rriot2ROM" />
        <property name="map7" value="0x1c00-0x1fff" />
    </component>
    <component name="ram" class="RAM">
        <data name="image" src="${REF}.bin" />
        <property name="size" value="0x400" />
        <connection name="host" ref="host:host" />
    </component>
    <component name="rriot1" class="MOS6530">
        <connection name="bus" ref="bus" />
        <connection name="portA" ref="kim1IO" />
        <property name="directionA" value="0" />
        <property name="dataA" value="0" />
        <connection name="portB" ref="kim1IO" />
        <property name="directionB" value="0" />
        <property name="dataB" value="0" />
        <connection name="busB" ref="" />
    </component>
    <component name="rriot2" class="MOS6530">
        <connection name="bus" ref="bus" />
        <connection name="portA" ref="" />
        <property name="directionA" value="0" />
        <property name="dataA" value="0" />
        <connection name="portB" ref="" />
        <property name="directionB" value="0" />
        <property name="dataB" value="0" />
    </component>
    <component name="rriot1RAM" class="RAM">
        <data name="image" src="${REF}.bin" />
        <property name="size" value="0x40" />
        <connection name="host" ref="host:host" />
    </component>
    <component name="rriot2RAM" class="RAM">
        <data name="image" src="${REF}.bin" />
        <property name="size" value="0x40" />
        <connection name="host" ref="host:host" />
    </component>
    <component name="rriot1ROM" class="ROM">
        <resource name="image" src="roms/MOS KIM-1 6530-002 ROM.bin" />
    </component>
    <component name="rriot2ROM" class="ROM">
        <resource name="image" src="roms/MOS KIM-1 6530-003 ROM.bin" />
    </component>
    <component name="kim1IO" class="KIM1IO">
        <connection name="host" ref="host:host" />
        <connection name="serialPort" ref="" />
        <connection name="audioOut" ref="audioOut" />
        <connection name="audioIn" ref="audioIn" />
        <resource name="view" src="images/MOS KIM-1 View.png" />
    </component>
    <component name="audioOut" class="Audio1Bit">
        <connection name="host" ref="host:host" />
    </component>
    <component name="audioIn" class="AudioPLL">
        <connection name="host" ref="host:host" />
        <property name="frequency" value="3400" />
    </component>
</device>

</dml>
